{% extends "base.html" %}
{% block title %}<title>{{ pagetitle | default:"SJ" }}</title>{% endblock %}

{% block content %}
<div class="container py-4">
    <h1 class="mb-4">Administration</h1>

    <!-- DB Admin Access -->
    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title">ğŸ—ƒï¸ Datenbank</h5>
            <a class="btn btn-primary" href="/admin" role="button">DB Admin</a>
        </div>
    </div>
    
    <!-- Final Runs -->
    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title">ğŸ FinallÃ¤ufe verwalten</h5>
            <form action="/setfinal/" method="post">
                {% csrf_token %}
                <div class="mb-2">
                    <button class="btn btn-success me-2" name="generate-final">FinallÃ¤ufe erstellen</button>
                    <button class="btn btn-danger me-2" name="delete-final" onclick="return confirm('Bist du sicher?');">FinallÃ¤ufe lÃ¶schen</button>
                </div>
            </form>
            <a class="btn btn-primary me-2" href="/printfinal" role="button">FinallÃ¤ufe drucken</a>
            <a class="btn btn-primary me-2" href="/ranking_export" role="button">Finalrangliste als CSV exportieren</a>
        </div>
    </div>

    <!-- Emails -->
    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title">ğŸ“§ Benutzerkommunikation / Startzettel</h5>
            <form method="post" action="{% url 'administration' %}">
                {% csrf_token %}
                <button class="btn btn-warning me-2" name="reset_admin_state">1. Admin-Status zurÃ¼cksetzen</button>
                <button class="btn btn-success me-2" name="send_invitation_email">2. Einladungsemails senden</button>
                <button class="btn btn-info me-2" name="print_registered_users">3. Startzettel registrierter Benutzer drucken</button>
            </form>
        </div>
    </div>

    <!-- Test Data -->
    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title">ğŸ§ª Testdaten erstellen</h5>
            <form class="row g-2" action="/addtestdata/" method="post">
                {% csrf_token %}
                <div class="col-md-4">
                    <input type="number" class="form-control" placeholder="Anzahl LÃ¤ufe" name="add_count_runs" required>
                </div>
                <div class="col-auto">
                    <button type="submit" class="btn btn-primary">Test-VorlÃ¤ufe erstellen</button>
                </div>
            </form>
        </div>
    </div>

</div>
{% endblock %}
